/* ==========================================================
 * bootstrap-formhelpers-datepicker.js
 * https://github.com/vlamanna/BootstrapFormHelpers
 * ==========================================================
 * Copyright 2012 Vincent Lamanna
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */!function(e){"use strict";function r(){i(e(t)).removeClass("open")}function i(t){var n=t.attr("data-target"),r;if(!n){n=t.attr("href");n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")}r=e(n);r.length||(r=t.parent());return r}var t="[data-toggle=bfh-datepicker]",n=function(t,n){this.options=e.extend({},e.fn.bfhdatepicker.defaults,n);this.$element=e(t);this.initCalendar()};n.prototype={constructor:n,daysInMonth:function(e,t){return(new Date(t,e,0)).getDate()},dayOfWeek:function(e,t,n){return(new Date(t,e,n)).getDay()},formatDate:function(e,t,n){var r=this.options.format;e+=1;e=new String(e);n=new String(n);e.length==1&&(e="0"+e);n.length==1&&(n="0"+n);r=r.replace("m",e);r=r.replace("y",t);r=r.replace("d",n);return r},parse:function(e,t){var n=this.options.format,r=n.indexOf("m"),i=n.indexOf("y"),s=n.indexOf("d"),o=[{type:"m",pos:r},{type:"y",pos:i},{type:"d",pos:s}];o.sort(function(e,t){return e.pos-t.pos});var u=t.match(/(\d+)/g);for(var a=0;a<o.length;a++)if(o[a]["type"]==e)return(new Number(u[a])).toString()},initCalendar:function(){var e=this.options.date;if(e==""){var t=new Date;this.$element.data("month",t.getMonth());this.$element.data("year",t.getFullYear())}else{this.$element.find("input[type=text]").val(e);this.$element.data("month",this.parse("m",e)-1);this.$element.data("year",this.parse("y",e))}this.updateCalendar()},updateCalendar:function(){var e,t,n,r,i,s,t=new Date;n=this.$element.data("month");r=this.$element.data("year");e=this.$element.find(".bfh-datepicker-calendar");e.find("table > thead > tr > th.month > span").text(BFHMonthsList[n]);e.find("table > thead > tr > th.year > span").text(r);i=e.find("table > thead > tr.days-header");i.html("");for(var o=0;o<BFHDaysList.length;o++)i.append("<th>"+BFHDaysList[o]+"</th>");s=e.find("table > tbody");s.html("");var u=this.daysInMonth(n,r),a=this.daysInMonth(n+1,r),f=this.dayOfWeek(n,r,1),l=this.dayOfWeek(n,r,a),c="";for(var o=0;o<f;o++){o==0&&(c+="<tr>");c+='<td class="off">'+(a-f+o)+"</td>";if(o==6){c+="</tr>";s.append(c);c=""}}for(var o=1;o<=a;o++){var h=this.dayOfWeek(n,r,o);h==0&&(c+="<tr>");o==t.getDate()&&n==t.getMonth()&&r==t.getFullYear()?c+='<td data-day="'+o+'" class="today">'+o+"</td>":c+='<td data-day="'+o+'">'+o+"</td>";if(h==6){c+="</tr>";s.append(c);c=""}}for(var o=l+1,p=1;o<=6;o++,p++){o==0&&(c+="<tr>");c+='<td class="off">'+p+"</td>";if(o==6){c+="</tr>";s.append(c);c=""}}},previousMonth:function(t){var n=e(this),r,i;r=n.closest(".bfh-datepicker");if(r.data("month")==0){r.data("month",11);r.data("year",new Number(r.data("year"))-1)}else r.data("month",new Number(r.data("month"))-1);i=r.data("bfhdatepicker");i.updateCalendar();return!1},nextMonth:function(t){var n=e(this),r,i;r=n.closest(".bfh-datepicker");if(r.data("month")==11){r.data("month",0);r.data("year",new Number(r.data("year"))+1)}else r.data("month",new Number(r.data("month"))+1);i=r.data("bfhdatepicker");i.updateCalendar();return!1},previousYear:function(t){var n=e(this),r,i;r=n.closest(".bfh-datepicker");r.data("year",new Number(r.data("year"))-1);i=r.data("bfhdatepicker");i.updateCalendar();return!1},nextYear:function(t){var n=e(this),r,i;r=n.closest(".bfh-datepicker");r.data("year",new Number(r.data("year"))+1);i=r.data("bfhdatepicker");i.updateCalendar();return!1},select:function(t){var n=e(this),r,i;r=n.closest(".bfh-datepicker");var s=r.data("month"),o=r.data("year"),u=n.data("day");i=r.data("bfhdatepicker");r.find("input[type=text]").val(i.formatDate(s,o,u)).trigger("change");return!1},toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;s=i(n);o=s.hasClass("open");r();o||s.toggleClass("open");return!1}};e.fn.bfhdatepicker=function(t){return this.each(function(){var r=e(this),i=r.data("bfhdatepicker"),s=typeof t=="object"&&t;i||r.data("bfhdatepicker",i=new n(this,s));typeof t=="string"&&i[t]()})};e.fn.bfhdatepicker.Constructor=n;e.fn.bfhdatepicker.defaults={format:"m/d/y",date:""};e(window).on("load",function(){e("div.bfh-datepicker").each(function(){var t=e(this);t.bfhdatepicker(t.data())})});e(function(){e("html").on("click.bfhdatepicker.data-api",r);e("body").on("click.bfhdatepicker.data-api touchstart.bfhdatepicker.data-api",t,n.prototype.toggle).on("click.bfhdatepicker.data-api touchstart.bfhdatepicker.data-api",".bfh-datepicker-calendar > table.calendar .month > .previous",n.prototype.previousMonth).on("click.bfhdatepicker.data-api touchstart.bfhdatepicker.data-api",".bfh-datepicker-calendar > table.calendar .month > .next",n.prototype.nextMonth).on("click.bfhdatepicker.data-api touchstart.bfhdatepicker.data-api",".bfh-datepicker-calendar > table.calendar .year > .previous",n.prototype.previousYear).on("click.bfhdatepicker.data-api touchstart.bfhdatepicker.data-api",".bfh-datepicker-calendar > table.calendar .year > .next",n.prototype.nextYear).on("click.bfhdatepicker.data-api touchstart.bfhdatepicker.data-api",".bfh-datepicker-calendar > table.calendar td:not(.off)",n.prototype.select).on("click.bfhdatepicker.data-api touchstart.bfhdatepicker.data-api",".bfh-datepicker-calendar > table.calendar",function(){return!1})})}(window.jQuery);